# Scripts for SVG Processing

This directory contains utility scripts to assist in the SVG-to-React component conversion process, particularly by optimizing SVG input for Large Language Models (LLMs).

## `prepare-svg-for-prompt.mjs`

This Node.js script processes SVG files by replacing verbose `d` attribute path data with concise placeholders. It also provides a mechanism to restore the original path data. This approach is designed to reduce the context length for LLMs when generating React components from SVGs, making the process more efficient and cost-effective.

### Commands:

1.  **`process`**: Replaces SVG path data with placeholders and generates a map file.
2.  **`restore`**: Restores SVG path data from placeholders using a generated map file.

### Usage:

#### 1. Processing an SVG (SVG Input -> Placeholder SVG + Map File)

This command takes an input SVG file, replaces all `d="..."` attributes with `d="{{SVG_WORKLOAD_PATH_ID_X}}"` placeholders, and outputs a new SVG file with these placeholders. It also generates a JSON file mapping each placeholder to its original path data.

```bash
node prepare-svg-for-prompt.mjs process <input-svg-file> <output-processed-svg-file> <output-map-json-file>
```

-   `<input-svg-file>`: The original SVG file to process.
-   `<output-processed-svg-file>`: The path where the SVG with placeholders will be saved.
-   `<output-map-json-file>`: The path where the JSON map of placeholders to original path data will be saved.

**Example:**

```bash
node prepare-svg-for-prompt.mjs process assets/my-icon.svg processed/my-icon-placeholder.svg processed/my-icon-map.json
```

#### 2. Restoring an SVG or React Component (Placeholder Input + Map File -> Restored Output)

This command takes a file (which can be a placeholder SVG or a React component containing placeholders in `d` attributes) and a map file. It replaces the placeholders with their original path data and outputs the restored file.

```bash
node prepare-svg-for-prompt.mjs restore <input-file-with-placeholders> <map-json-file> <output-restored-file>
```

-   `<input-file-with-placeholders>`: The file (SVG or React component) containing `d` attributes with placeholders.
-   `<map-json-file>`: The JSON map file generated during the `process` step.
-   `<output-restored-file>`: The path where the file with original path data will be saved.

**Example (Restoring an SVG):**

```bash
node prepare-svg-for-prompt.mjs restore processed/my-icon-placeholder.svg processed/my-icon-map.json restored/my-icon.svg
```

**Example (Restoring a React Component generated by LLM):**

Assume an LLM generated `components/MyIcon.tsx` based on `my-icon-placeholder.svg`.

```bash
node prepare-svg-for-prompt.mjs restore components/MyIcon.tsx processed/my-icon-map.json components/MyIcon.restored.tsx
```

### LLM Context

The file `prepare-svg-for-prompt.txt` contains the detailed instructions and examples provided to the LLM for converting processed SVG markup into React components. It outlines the expected input format (with placeholders) and the desired structure and conventions for the output React component.
